<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Rikki Tooley's Sweet Sweet Page</title>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300,400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="style.css"/>
    <link rel="stylesheet" href="res/css/nprogress.css"/>
    <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script type="text/javascript" src="http://malsup.github.io/jquery.cycle.all.js"></script>
    <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.3/jquery.easing.min.js"></script>
    <script type="text/javascript" src="lib/lastfmjs/lastfm.api.js"></script>
    <script type="text/javascript" src="lib/lastfmjs/lastfm.api.cache.js"></script>
    <script type="text/javascript" src="lib/lastfmjs/lastfm.api.md5.js"></script>

    <script type="text/javascript" src="lib/gh3js/vendors/async.js"></script>
    <script type="text/javascript" src="lib/gh3js/vendors/underscore-min.js"></script>
    <script type="text/javascript" src="lib/gh3js/gh3.js"></script>

    <script type="text/javascript" src="http://js.api.here.com/se/2.5.4/jsl.js"></script>

    <script type="text/javascript" src="res/js/tiles.js"></script>

    <script type="text/javascript" src="res/js/nprogress.js"></script>

    <!-- TODO tidy up the script section somehow?? -->
    <script type="text/javascript">
        function greeting(random){
            var dt = new Date();
            var hours = dt.getHours();

            var morning = ['Mornin\''];
            var day = ['Alright?', 'Hi there!'];
            var evening = ['Evenin\''];

            console.log('it is at least ' + hours + ':00');
            var greetings;
            if (hours > 3 && hours < 12) {
                greetings = morning;
            }
            else if (hours > 16 && hours < 21) {
                greetings = evening;
            }
            else {
                greetings = day;
            }
            var index = parseInt(random * greetings.length);

            console.log('Chose greeting  ' + index );
            return greetings[index];
        }

        $(window).bind('beforeunload', function() {
            NProgress.done();
        });

        function getAnimation(id){
            switch (id){
                case 'ease-01':
                    return metroTileAnimation;
                default:
                    return metroTileAnimation;
            }
        }

        $(document).ready(function() {

            $('.tile > .tile-link').click(function() {
                NProgress.start();
            });

            $.get("./api/all", null, function(data){
                    for (var i = 0; i < data.length; i++){
                        var tile = data[i];
                        var animation = getAnimation(tile['tile-template']);

                        switch (tile.style){
                            case 'lastfm':
                                setupLastfmTile(animation, $('.tile.lastfm'), 1);
                                break;
                            case 'github':
                                setupGithubTile(animation, $('.tile.github'), 2);
                                break;
                            case 'map':
                                setupMapTile(metroTileAnimation, $('.tile.map'), 3);
                                break;
                        }
                    }
                }
            );

            $('#header-greeting').text(greeting(Math.random()));
        });
    </script>
</head>
<body>

<header id="prime">
    <div id="header-lead">
        <p id="header-greeting">Hello.</p>
        <p>My name is Rikki Tooley, and I'm an independent software developer.</p>
    </div>
</header>

<div id="burrito">
    <div id="top-artists-tile" class="tile lastfm">
        <a class="tile-link" href="http://last.fm/user/tehrikkit"> </a>
        <div class="faces">
            <div class="front">
                <p class="title">Last.fm</p>
            </div>
            <div class="back">
                <ul class="tile-content">
                    <li class="fill-template template-image">
                        <h3 class="template-lead"></h3>
                        <div class="template-overlay"></div>
                    </li>
                </ul>
                <p class="title">Last.fm</p>
                <div class="badge"></div>
            </div>
        </div>
    </div>

    <div id="github-projects-tile" class="tile github">
        <a class="tile-link" href="https://github.com/rikkit"> </a>
        <div class="faces">
            <div class="front">
                <p class="title">GitHub</p>
            </div>
            <div class="back">
                <ul class="tile-content">
                    <li class="fill-template template-image">
                        <h3 class="template-lead"></h3>
                    </li>
                </ul>
                <p class="title">GitHub</p>
                <div class="badge"></div>
            </div>
        </div>
    </div>

    <div id="blog-tile" class="tile blog">
        <a class="tile-link" href="http://rikk.it"> </a>
        <div class="faces">
            <div class="front">
                <p class="title">Blog</p>
            </div>
        </div>
    </div>

    <div id="map-location-tile" class="tile map">
        <a class="tile-link" href="http://her.is/uLjXEx"> </a>
        <div class="faces">
            <div class="front">
                <p class="title">Hometown</p>
            </div>
            <div class="back">
                <ul class="tile-content">
                    <li class="fill-template template-image">
                        <h3 class="template-lead">Bath, UK</h3>
                        <div class="template-overlay"></div>
                    </li>
                </ul>
                <p class="title">Hometown</p>
                <div class="badge"></div>
            </div>
        </div>
    </div>
</div>

</body>
</html>
